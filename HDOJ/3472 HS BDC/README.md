HDOJ 3472 HS BDC

【题目大意】

给出N(1 <= N <= 1000)个长度不超过20的小写字母单词，若一个单词的最后一个字母和另一个单词的第一个字母相同则可以相接。每个单词只能用一次，有些单词可以选择倒过来使用。判断能否将这些单词首尾相接。

【算法分析】

混合图欧拉路。首先使用并查集等方法判断连通性。给无向边定向后，设每个点的权值为其入度 - 出度，若权值为正则源点向其连边，权值为负则其向汇点连边，容量均为权值的绝对值。

而原图中的那些可以反向的无向边，我们在网络中连容量为2的反向边，可以发现恰好能弥补入度和出度的转化。

考虑欧拉路的定义，我们的目标是使每个点的入度 = 出度，即权值为零。也就是说，我们要使得这个网络流量平衡。

由于每个点或与源点相连，或与汇点相连，而用于弥补的反向边容量均为偶数，也就要求初始与源汇相连的这些边均为偶数。

而欧拉路允许我们给一个点补上1的入度，给另1个点补上1的出度以达到平衡，那么原来连向源汇的边只有两条的容量可以为奇数。

那么，枚举哪个补入度哪个补出度，再求最大流看是否满流就可以了。

然而这样还有一个问题是，用于弥补的反向边必须强制流2而不能流1，为了达到这一目的，在我们刚刚新建的容量全是偶数的网络里，把所有容量除以2再做。

设字符集大小为C，时间复杂度O(MC^2)。
