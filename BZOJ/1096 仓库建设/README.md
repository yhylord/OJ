BZOJ 1096 仓库建设

为了方便计算代价，我们记d_i表示从第i个到第N个工厂的产品都运到第N个工厂的代价，s_i表示从第1个到第i个工厂共有多少件产品。

用f(i)表示到第i个工厂为止（第i个工厂必须建仓库）所需最小总代价，则f(i) = min{f(j) + d_(j + 1) - d_(i + 1) - (s_i - s_j) * (x_n - x_i)} + c_i(0 <= j < i)。

变形得f(i) = min{f(j) + d_(j + 1) + s_j * x_n - s_j * x_i} - d_(i + 1) - s_i * (x_n - x_i) + c_i。

令x = s_j, y = f(j) + d_(j + 1) + s_j * x_n，我们要min z = -x_i * x + y，也即要使直线y = x_i * x + z的纵截距最小。

由于x单调增，斜率x_i单调增，我们可以用单调队列维护下凸壳来完成斜率优化。时间复杂度O(N)。
