BZOJ 3232 圈地游戏

对于分数规划问题，常用的手段是二分答案k，判定max{V - kC}和0的大小关系。

我们发现接下来的问题其实是分集合，即把格子分成取和不取两个集合。那么我们首先将所有格子的价值相加，要求的是构成合法方案需要付出的最小代价。

我们给最外围添一圈点，它们都向汇点连容量为正无穷的边，把它们强制塞入不取的集合。

其他点先放入取的集合，源点向它们连容量为该格价值的边，代表进入不取的集合的代价。

相邻点之间连容量为格子间边费用的边，代表相异集合的相邻点所需要的代价。

那么，求这个图的最小割即可得到构成合法方案需要付出的最小代价。

当然我们发现，这样存在一个问题，可能会得到多个连通块。然而这样的担心是多余的。

我们以存在两个连通块为例，总价值分别为V1, V2，总费用分别为C1, C2，我们需要比较V1 / C1, V2 / C2, (V1 + V2) / (C1 + C2)之间的大小关系。

通分后可以发现，(V1 + V2) / (C1 + C2)必然不大于V1 / C1和V2 / C2中的某一个。

因此，多个连通块不可能优于单个连通块。

时间复杂度O((NM)^3logK)。
