BZOJ 3203 保护出题人

由题意可以列出a_1 / y_1 <= x1, a_2 / y_2 <= x2, (a_2 + a_1) / y_2 <= x2 + d, ...。

令s_i = sigma{a_j}(1 <= j <= i)，则y_i = max{(s_i - s_(j - 1)) / (x_i + d * (i - j))}(1 <= j <= i)。

我们发现，y_i恰是(x_i + i * d, s_i)与(j * d, s_(j - 1))两点连线的斜率，且(x_i + i * d, s_i)在(j * d, s_(j - 1))的右上方。

对于第i关的决策，我们就是要找定点(x_i + i * d, s_i)与所有(j * d, s_(j - 1))连线中斜率最大的一个，显然确定的点必须在下凸壳上。

由于j * d单调增，我们可以用一个栈来维护下凸壳。而由其单峰性，我们可以通过三分得到最大斜率。

时间复杂度O(NlogN)。
