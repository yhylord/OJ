BZOJ 3127 Yin and Yang

关于树上路径的问题，我们考虑使用点分治来解决。

题目的要求比较麻烦，我们把0/1看作-1/+1的话，实质就是求中间某项是0且末项是0的路径个数。

考虑处理过根的路径，为了避免重复，我们还是逐个儿子枚举。

设c1[x]表示在当前儿子前到根距离为x且在到根路径上第一次出现的点个数，c2[x]表示在当前儿子前到根距离为x且在到根路径上第二次及以上出现的点个数。

那么，设当前儿子的某点到根的距离为x，设在到根路径上第一次出现，则答案加上c2[-x]，否则答案加上c1[-x] + c2[-x]。

此后，我们再用当前儿子的状态去更新c1和c2。

注意哈希的细节，时间复杂度O(NlogN)。
