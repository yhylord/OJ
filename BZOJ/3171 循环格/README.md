BZOJ 3171 循环格

题目的本质是要求得到若干条欧拉回路，这就使我们想到了一个经典的建图方式――利用每个点的入度 = 出度。设每个点的权值为入度 - 出度，若为正从源点向它连容量权值费用0的边，若为负从它向汇点连容量权值绝对值费用0的边。

箭头的修改对应了权值的转移，因此对于每个箭头，我们把箭头所指方向的点向该箭头对应的虚拟点连容量1费用0的边，由虚拟点向箭头没指的三个方向的点连容量1费用1的边，从而实现一个箭头唯一变换到另一个箭头。

这样，我们求出其最小费用最大流，即求得了答案。时间复杂度O((RC)^3)。
