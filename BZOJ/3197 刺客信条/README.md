BZOJ 3197 刺客信条

首先我们发现，一棵树的中心（最长链中点）永远是不变的，因此我们以它为根建立有根树。

接下来就是选儿子进行匹配的问题了，由于一个点的儿子最多11个，我们可以使用状压DP来解决任意两棵子树的答案。

对于根为x, y的两棵子树，我们用f[s]表示x的前|s|个儿子配y的儿子集合为s的答案，只要再枚举接下来配哪个儿子即可完成转移。

同构的合法性也是容易判断的，只要一路上儿子个数都相等即可，而这也能极大地优化时间。设最大儿子数为C，时间复杂度O(N^2 * 2^C * C)。
