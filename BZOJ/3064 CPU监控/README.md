BZOJ 3064 CPU监控

首先由于要求历史最大值，我们必须维护6个域：当前最大值，当前累加标记，当前覆盖标记，历史最大值，历史最大累加标记，历史最大覆盖标记。

瓶颈主要体现在历史标记的下传：当我们把当前结点的历史标记传给它的儿子时，仍然应该把它的儿子当成一个被进行累加或是覆盖操作的结点，进行和直接进行累加或是覆盖操作的结点一样的判断工作，唯一的区别是下传时只会影响历史值而不会改变当前实际值（类似于虚拟操作）。

注意处理的细节即可。时间复杂度O(NlogN)。
