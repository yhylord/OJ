BZOJ 3218 A + B problem

这是一个分集合的问题，把N个方格分成黑白两个集合。

令S集为黑集合，T集为白集合。我们首先把所有好看度相加，接下来要求的就是构成合法方案需要付出的最小总代价。

将S向方格i连容量为b_i的边，方格i向T连容量为w_i的边，那么必然要割掉一条完成分集合的过程。

下面自然想到，首先对于方格i，我们建虚拟点i'，将i'向所有能导致i成为奇怪的方格j连容量为正无穷的边，i向i'连容量为p_i的边，那么，如果i为黑色，存在一个j为白色，就必然要割掉这条容量为p_i的边。

求出最小割自然就可以了。然而这样点数O(N)，边数O(N^2)，时空都无法承受。

我们发现，能导致i成为奇怪的方格的条件是一个范围，我们可以想到利用线段树来减少边的规模，父向子连容量为正无穷的边，叶子结点向对应权值的方格连容量为正无穷的边。

这样，对于包含[1, i - 1]所有方格的线段树，i'只需要向logN个区间连边就可以了。

然而，如果每次重建，时空复杂度并没有得到改善。

因为每次只会新插入一个方格，我们可以自然地想到可持久化线段树。离散化后可以保证点数O(NlogN)，边数O(NlogN)。

时间复杂度O((NlogN)^3)。
