BZOJ 1930 吃豆豆

两条线如果不在有豆豆的地方相交，那么必然可以转化为不相交的两条线。

由此，就完全转化为了找两条不经过相同点的路径使得点数最多，这就是经典费用流模型了，在我介绍费用流的文章里也有，在此不再赘述。

可惜这样会TLE，考虑进行优化。

由于题目的特殊性，我们发现费用流一共要增广2次，考虑对第一次进行手动增广，实际上就是找一条最长路，这个用DP可以在O(N^2)的时间复杂度里解决。

接下来重新建图用SPFA进行第二次增广，虽然最坏时间复杂度O(N^3)，但已经可以AC了。

其实这个题的标算是DP + 树状数组优化。

首先我们将点按x为第一关键字y为第二关键字从小到大排序，用f(i, j)表示两条线右上角分别为i, j的最优解，显然只要算i < j的情形就可以了。

为了处理不经过相同点的问题，我们规定f(i, j) = max{f(i, k) + 1}, k < j && y_k <= y_j，只要规定f(i, i)是非法状态，就不会出现f(i, j)的最优情况里j所在路径经过i。

那么，很显然，我们可以对y这一维利用树状数组进行优化，时间复杂度O(N^2logN)。

不过我是用DP + 费用流来实现的。
